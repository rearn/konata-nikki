CREATE TABLE kn_contents (
	id integer primary key autoincrement,
	published date,
	updated date,
	title varchar(1024) unique not null,
	author int,
	context clob,
	status char(16),
	next_id int unique default null,
	prev_id int unique default null,
	foreign key(author)
		references kn_author(id)
		on update cascade
		on delete set null
	foreign key(next_id)
		references kn_contents(id)
		on update cascade
		on delete restrict
	foreign key(next_id)
		references kn_contents(id)
		on update cascade
		on delete restrict
);


CREATE TABLE kn_author (
	id integer primary key,
	name char(256) unique
);

CREATE TABLE kn_contents_tags (
	id integer primary key,
	content_id int,
	tag_id int,
	foreign key(content_id) 
		references kn_contents(id)
		on update cascade
		on delete set null,
	foreign key(tag_id) 
		references kn_tags(id)
		on update cascade
		on delete restrict
);

CREATE TABLE kn_tags (
	id integer primary key,
	tag char(256) unique
);

-- 以下は、サンプレです
INSERT INTO kn_tags ( tag ) VALUES ( "test" );
INSERT INTO kn_author ( name ) VALUES ( "name" );


INSERT INTO kn_contents (
	published, updated, title, author, context, status
) VALUES (
	datetime('now'),
	datetime('now'),
	"Sample",
	1,
"jubeat_saucer_jubegraph_bot
===========================

はじめに
---------------------------
このソフトは、[jubegraph](http://jubegraph.dyndns.org/jubeat_saucer/)に自動でアップデートするために開発したソフトです。
そのため、いろいろとお粗末なところがあります。
また、このソフトは[KONAMI](http://p.eagate.573.jp/)及び[jubegraph](http://jubegraph.dyndns.org/jubeat_saucer/)とは、一切関係ありません。

仕様環境
---------------------------
このソフトは、以下のソフトを必要とします。

* OpenSSL
* BSDソケット

そのため、Unix環境が必要と思われます。

ライセンス
---------------------------
ライセンスは三条項BSDライセンスです。
詳しくは、LICENSEファイルをご覧ください。",
	"a"
);


INSERT INTO kn_contents_tags ( content_id, tag_id ) VALUES (
	1, 1
);

